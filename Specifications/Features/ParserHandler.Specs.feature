Feature: ParserHandler
    Testing the parser

    Background: Given handler
        Given a handler of type ParserHandler

    Scenario: Parsing a message
        When the following events of type MqttEventReceived is produced
            | Payload                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
            | 123 34 101 110 100 95 100 101 118 105 99 101 95 105 100 115 34 58 123 34 100 101 118 105 99 101 95 105 100 34 58 34 55 48 98 51 100 53 55 48 53 48 48 48 98 98 52 98 34 44 34 97 112 112 108 105 99 97 116 105 111 110 95 105 100 115 34 58 123 34 97 112 112 108 105 99 97 116 105 111 110 95 105 100 34 58 34 111 121 115 116 101 114 45 108 111 114 97 119 97 110 45 56 54 56 34 125 44 34 100 101 118 95 101 117 105 34 58 34 55 48 66 51 68 53 55 48 53 48 48 48 66 66 52 66 34 44 34 106 111 105 110 95 101 117 105 34 58 34 55 48 66 51 68 53 55 48 53 48 48 48 48 48 48 48 34 44 34 100 101 118 95 97 100 100 114 34 58 34 50 54 48 56 68 57 52 65 34 125 44 34 99 111 114 114 101 108 97 116 105 111 110 95 105 100 115 34 58 91 34 97 115 58 117 112 58 48 49 70 51 65 77 80 84 86 55 74 57 90 80 89 71 84 86 81 48 78 65 86 56 48 66 34 44 34 103 115 58 99 111 110 110 58 48 49 70 51 55 88 74 82 83 83 69 48 84 67 52 89 81 56 66 70 51 53 89 49 89 83 34 44 34 103 115 58 117 112 58 104 111 115 116 58 48 49 70 51 55 88 74 82 83 89 48 49 50 83 70 80 72 83 74 68 55 74 55 74 77 49 34 44 34 103 115 58 117 112 108 105 110 107 58 48 49 70 51 65 77 80 84 52 54 75 86 86 67 81 77 67 55 56 81 86 68 50 87 77 56 34 44 34 110 115 58 117 112 108 105 110 107 58 48 49 70 51 65 77 80 84 52 56 89 81 89 75 83 50 77 65 80 87 83 82 52 67 87 87 34 44 34 114 112 99 58 47 116 116 110 46 108 111 114 97 119 97 110 46 118 51 46 71 115 78 115 47 72 97 110 100 108 101 85 112 108 105 110 107 58 48 49 70 51 65 77 80 84 52 56 89 57 66 80 86 66 86 72 68 90 75 54 87 88 67 55 34 44 34 114 112 99 58 47 116 116 110 46 108 111 114 97 119 97 110 46 118 51 46 78 115 65 115 47 72 97 110 100 108 101 85 112 108 105 110 107 58 48 49 70 51 65 77 80 84 86 50 81 54 54 77 90 56 48 82 78 48 71 82 48 55 75 69 34 93 44 34 114 101 99 101 105 118 101 100 95 97 116 34 58 34 50 48 50 49 45 48 52 45 49 53 84 49 49 58 50 57 58 53 50 46 57 57 57 57 53 52 56 56 57 90 34 44 34 117 112 108 105 110 107 95 109 101 115 115 97 103 101 34 58 123 34 115 101 115 115 105 111 110 95 107 101 121 95 105 100 34 58 34 65 88 105 120 116 70 50 87 108 75 69 71 87 68 52 43 82 79 104 57 52 81 61 61 34 44 34 102 95 112 111 114 116 34 58 49 44 34 102 95 99 110 116 34 58 52 51 44 34 102 114 109 95 112 97 121 108 111 97 100 34 58 34 47 74 69 113 73 53 89 85 89 65 77 85 65 56 52 61 34 44 34 100 101 99 111 100 101 100 95 112 97 121 108 111 97 100 34 58 123 34 98 97 116 86 34 58 53 46 49 53 44 34 102 105 120 70 97 105 108 101 100 34 58 102 97 108 115 101 44 34 104 101 97 100 105 110 103 68 101 103 34 58 50 56 46 49 50 53 44 34 105 110 84 114 105 112 34 58 102 97 108 115 101 44 34 108 97 116 105 116 117 100 101 34 58 53 56 46 57 57 57 50 52 52 52 44 34 108 111 110 103 105 116 117 100 101 34 58 53 46 54 54 50 56 51 55 52 44 34 109 97 110 68 111 119 110 34 58 110 117 108 108 44 34 115 112 101 101 100 75 109 112 104 34 58 51 44 34 116 121 112 101 34 58 34 112 111 115 105 116 105 111 110 34 125 44 34 114 120 95 109 101 116 97 100 97 116 97 34 58 91 123 34 103 97 116 101 119 97 121 95 105 100 115 34 58 123 34 103 97 116 101 119 97 121 95 105 100 34 58 34 110 111 114 115 101 97 45 100 117 115 97 118 105 107 45 48 48 51 34 44 34 101 117 105 34 58 34 51 50 51 53 51 49 51 50 50 67 48 48 55 49 48 48 34 125 44 34 116 105 109 101 34 58 34 50 48 50 49 45 48 52 45 49 53 84 49 49 58 50 57 58 53 55 46 51 53 52 50 55 52 90 34 44 34 116 105 109 101 115 116 97 109 112 34 58 50 50 54 54 48 54 56 52 48 44 34 114 115 115 105 34 58 49 48 56 44 34 99 104 97 110 110 101 108 95 114 115 115 105 34 58 49 48 56 44 34 115 110 114 34 58 57 44 34 117 112 108 105 110 107 95 116 111 107 101 110 34 58 34 67 105 65 75 72 103 111 83 98 109 57 121 99 50 86 104 76 87 82 49 99 50 70 50 97 87 115 116 77 68 65 122 69 103 103 121 78 84 69 121 76 65 66 120 65 66 68 52 47 89 90 115 71 103 115 73 115 77 102 103 103 119 89 81 120 98 87 111 102 83 68 65 56 99 101 87 122 77 81 86 34 44 34 99 104 97 110 110 101 108 95 105 110 100 101 120 34 58 52 125 44 123 34 103 97 116 101 119 97 121 95 105 100 115 34 58 123 34 103 97 116 101 119 97 121 95 105 100 34 58 34 110 111 114 115 101 97 45 100 117 115 97 118 105 107 45 48 48 49 34 44 34 101 117 105 34 58 34 51 50 51 53 51 49 51 50 50 66 48 48 51 54 48 48 34 125 44 34 116 105 109 101 34 58 34 50 48 50 49 45 48 52 45 49 53 84 49 49 58 51 48 58 48 52 46 54 56 56 49 54 56 90 34 44 34 116 105 109 101 115 116 97 109 112 34 58 50 53 55 54 50 50 51 53 50 51 44 34 114 115 115 105 34 58 55 55 44 34 99 104 97 110 110 101 108 95 114 115 115 105 34 58 55 55 44 34 115 110 114 34 58 49 48 44 34 117 112 108 105 110 107 95 116 111 107 101 110 34 58 34 67 105 65 75 72 103 111 83 98 109 57 121 99 50 86 104 76 87 82 49 99 50 70 50 97 87 115 116 77 68 65 120 69 103 103 121 78 84 69 121 75 119 65 50 65 66 67 106 109 114 106 77 67 82 111 76 67 76 68 72 52 73 77 71 69 77 105 90 47 51 52 103 117 75 71 78 108 47 50 76 70 81 61 61 34 44 34 99 104 97 110 110 101 108 95 105 110 100 101 120 34 58 52 125 44 123 34 103 97 116 101 119 97 121 95 105 100 115 34 58 123 34 103 97 116 101 119 97 121 95 105 100 34 58 34 110 111 114 115 101 97 45 100 117 115 97 118 105 107 45 48 48 50 34 44 34 101 117 105 34 58 34 51 50 51 53 51 49 51 50 50 67 48 48 55 50 48 48 34 125 44 34 116 105 109 101 34 58 34 50 48 50 49 45 48 52 45 49 53 84 49 49 58 50 57 58 53 56 46 49 54 48 50 50 51 90 34 44 34 116 105 109 101 115 116 97 109 112 34 58 51 52 56 57 48 52 52 57 49 56 44 34 114 115 115 105 34 58 55 51 44 34 99 104 97 110 110 101 108 95 114 115 115 105 34 58 55 51 44 34 115 110 114 34 58 57 46 50 53 44 34 117 112 108 105 110 107 95 116 111 107 101 110 34 58 34 67 105 65 75 72 103 111 83 98 109 57 121 99 50 86 104 76 87 82 49 99 50 70 50 97 87 115 116 77 68 65 121 69 103 103 121 78 84 69 121 76 65 66 121 65 66 67 50 115 57 114 47 68 66 111 77 67 76 68 72 52 73 77 71 69 79 54 104 52 111 69 66 73 80 68 100 111 100 114 70 112 104 85 61 34 44 34 99 104 97 110 110 101 108 95 105 110 100 101 120 34 58 52 125 93 44 34 115 101 116 116 105 110 103 115 34 58 123 34 100 97 116 97 95 114 97 116 101 34 58 123 34 108 111 114 97 34 58 123 34 98 97 110 100 119 105 100 116 104 34 58 49 50 53 48 48 48 44 34 115 112 114 101 97 100 105 110 103 95 102 97 99 116 111 114 34 58 55 125 125 44 34 100 97 116 97 95 114 97 116 101 95 105 110 100 101 120 34 58 53 44 34 99 111 100 105 110 103 95 114 97 116 101 34 58 34 52 47 53 34 44 34 102 114 101 113 117 101 110 99 121 34 58 34 56 54 55 51 48 48 48 48 48 34 44 34 116 105 109 101 115 116 97 109 112 34 58 50 50 54 54 48 54 56 52 48 44 34 116 105 109 101 34 58 34 50 48 50 49 45 48 52 45 49 53 84 49 49 58 50 57 58 53 55 46 51 53 52 50 55 52 90 34 125 44 34 114 101 99 101 105 118 101 100 95 97 116 34 58 34 50 48 50 49 45 48 52 45 49 53 84 49 49 58 50 57 58 53 50 46 50 54 52 53 54 55 51 50 57 90 34 44 34 99 111 110 115 117 109 101 100 95 97 105 114 116 105 109 101 34 58 34 48 46 48 54 49 54 57 54 115 34 125 125 |
        Then the following events of type LoraDatapointOutput is produced
            | Source | Tag                         | Value      | Datatype |
            | Lora   | 70B3D5705000BB4B/batV       | 5.15       | double    |
            | Lora   | 70B3D5705000BB4B/fixFailed  | false      | bool     |
            | Lora   | 70B3D5705000BB4B/headingDeg | 28.125     | double    |
            | Lora   | 70B3D5705000BB4B/inTrip     | false      | bool     |
            | Lora   | 70B3D5705000BB4B/latitude   | 58.9992444 | double    |
            | Lora   | 70B3D5705000BB4B/longitude  | 5.6628374  | double    |
            | Lora   | 70B3D5705000BB4B/manDown    | null       | object   |
            | Lora   | 70B3D5705000BB4B/speedKmph  | 3          | double    |
            | Lora   | 70B3D5705000BB4B/type       | position | string   |

